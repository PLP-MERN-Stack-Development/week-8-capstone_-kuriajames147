{"ast":null,"code":"var _jsxFileName = \"D:\\\\Learning center\\\\plp\\\\Mern\\\\Week 8 final project\\\\week-8-capstone_-kuriajames147\\\\frontend\\\\src\\\\pages\\\\Dashboard.js\",\n  _s = $RefreshSig$();\nimport { useState, useEffect } from 'react';\nimport { useAuth } from '../context/AuthContext';\nimport api from '../services/api';\nimport useSocket from '../hooks/useSocket';\nimport TaskList from '../components/tasks/TaskList';\nimport TeamList from '../components/teams/TeamList';\nimport TaskForm from '../components/tasks/TaskForm';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Dashboard() {\n  _s();\n  const {\n    user\n  } = useAuth();\n  const [tasks, setTasks] = useState([]);\n  const [teams, setTeams] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [selectedTeam, setSelectedTeam] = useState(null);\n\n  // Socket.io for real-time updates\n  const {\n    socket\n  } = useSocket({\n    taskCreated: newTask => {\n      if (!selectedTeam || newTask.team === selectedTeam) {\n        setTasks(prev => [newTask, ...prev]);\n      }\n    },\n    taskUpdated: updatedTask => {\n      setTasks(prev => prev.map(task => task._id === updatedTask._id ? updatedTask : task));\n    }\n  });\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        const [tasksRes, teamsRes] = await Promise.all([api.get('/tasks'), api.get('/teams')]);\n        setTasks(tasksRes.data);\n        setTeams(teamsRes.data);\n\n        // Join team rooms for real-time updates\n        if (socket) {\n          socket.emit('joinTeams', teamsRes.data.map(team => team._id));\n        }\n      } catch (err) {\n        console.error('Failed to fetch data:', err);\n      } finally {\n        setLoading(false);\n      }\n    };\n    fetchData();\n  }, [socket]);\n  const handleTaskCreated = newTask => {\n    setTasks(prev => [newTask, ...prev]);\n  };\n  if (loading) return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"loading\",\n    children: \"Loading dashboard...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 58,\n    columnNumber: 23\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"dashboard-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"sidebar\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Your Teams\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(TeamList, {\n        teams: teams,\n        selectedTeam: selectedTeam,\n        onSelectTeam: setSelectedTeam\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"main-content\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"dashboard-header\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: selectedTeam ? `${selectedTeam.name} Tasks` : 'All Tasks'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(TaskForm, {\n          teamId: selectedTeam,\n          onTaskCreated: handleTaskCreated\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(TaskList, {\n        tasks: selectedTeam ? tasks.filter(task => task.team === selectedTeam) : tasks\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 61,\n    columnNumber: 5\n  }, this);\n}\n_s(Dashboard, \"QLNaC2lz+0k31uxEt9+7NP1VkKE=\", false, function () {\n  return [useAuth, useSocket];\n});\n_c = Dashboard;\nvar _c;\n$RefreshReg$(_c, \"Dashboard\");","map":{"version":3,"names":["useState","useEffect","useAuth","api","useSocket","TaskList","TeamList","TaskForm","jsxDEV","_jsxDEV","Dashboard","_s","user","tasks","setTasks","teams","setTeams","loading","setLoading","selectedTeam","setSelectedTeam","socket","taskCreated","newTask","team","prev","taskUpdated","updatedTask","map","task","_id","fetchData","tasksRes","teamsRes","Promise","all","get","data","emit","err","console","error","handleTaskCreated","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onSelectTeam","name","teamId","onTaskCreated","filter","_c","$RefreshReg$"],"sources":["D:/Learning center/plp/Mern/Week 8 final project/week-8-capstone_-kuriajames147/frontend/src/pages/Dashboard.js"],"sourcesContent":["import { useState, useEffect } from 'react';\r\nimport { useAuth } from '../context/AuthContext';\r\nimport api from '../services/api';\r\nimport useSocket from '../hooks/useSocket';\r\nimport TaskList from '../components/tasks/TaskList';\r\nimport TeamList from '../components/teams/TeamList';\r\nimport TaskForm from '../components/tasks/TaskForm';\r\n\r\nexport default function Dashboard() {\r\n  const { user } = useAuth();\r\n  const [tasks, setTasks] = useState([]);\r\n  const [teams, setTeams] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [selectedTeam, setSelectedTeam] = useState(null);\r\n\r\n  // Socket.io for real-time updates\r\n  const { socket } = useSocket({\r\n    taskCreated: (newTask) => {\r\n      if (!selectedTeam || newTask.team === selectedTeam) {\r\n        setTasks(prev => [newTask, ...prev]);\r\n      }\r\n    },\r\n    taskUpdated: (updatedTask) => {\r\n      setTasks(prev => prev.map(task => \r\n        task._id === updatedTask._id ? updatedTask : task\r\n      ));\r\n    }\r\n  });\r\n\r\n  useEffect(() => {\r\n    const fetchData = async () => {\r\n      try {\r\n        const [tasksRes, teamsRes] = await Promise.all([\r\n          api.get('/tasks'),\r\n          api.get('/teams')\r\n        ]);\r\n        setTasks(tasksRes.data);\r\n        setTeams(teamsRes.data);\r\n        \r\n        // Join team rooms for real-time updates\r\n        if (socket) {\r\n          socket.emit('joinTeams', teamsRes.data.map(team => team._id));\r\n        }\r\n      } catch (err) {\r\n        console.error('Failed to fetch data:', err);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchData();\r\n  }, [socket]);\r\n\r\n  const handleTaskCreated = (newTask) => {\r\n    setTasks(prev => [newTask, ...prev]);\r\n  };\r\n\r\n  if (loading) return <div className=\"loading\">Loading dashboard...</div>;\r\n\r\n  return (\r\n    <div className=\"dashboard-container\">\r\n      <div className=\"sidebar\">\r\n        <h3>Your Teams</h3>\r\n        <TeamList \r\n          teams={teams} \r\n          selectedTeam={selectedTeam}\r\n          onSelectTeam={setSelectedTeam}\r\n        />\r\n      </div>\r\n      \r\n      <div className=\"main-content\">\r\n        <div className=\"dashboard-header\">\r\n          <h2>{selectedTeam ? `${selectedTeam.name} Tasks` : 'All Tasks'}</h2>\r\n          <TaskForm teamId={selectedTeam} onTaskCreated={handleTaskCreated} />\r\n        </div>\r\n        \r\n        <TaskList \r\n          tasks={selectedTeam \r\n            ? tasks.filter(task => task.team === selectedTeam)\r\n            : tasks\r\n          } \r\n        />\r\n      </div>\r\n    </div>\r\n  );\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}